.section
  %table{ :border => 0, :width => 500, :cellpadding => 0, :cellspacing => 0 }
    %tr
      %td{ :valign => :top }
        .label.req.top #{t :name}:
        = f.text_field :title, :style => "width:324px"
      %td= spacer
      %td{ :valign => :top }
        .label Status:
        = f.select :status, Setting.invoice_status, { :selected => (@invoice.status || "open").to_sym }, { :style => "width:160px" }
      %td= spacer
      %td{ :valign => :top }
        .label Unique Invoice ID:
        = f.text_field :uniqueid, {:style => "width:160px", :disabled =>"disabled" }
  
  %table{ :border => 0, :width => 500, :cellpadding => 0, :cellspacing => 0 }
    = fields_for(@account) do |a|
      = a.hidden_field :user_id
      = a.hidden_field :assigned_to
      = a.hidden_field :access, :value => Setting.default_access  
      %tr
        %td{ :valign => :top }
          .label
            #{t :account}
            %span#account_create_title
              (#{t :create_issue} #{t :or} <a href='#' onclick='crm.select_account(1); return false;'>#{t :select_existing}</a>):
            %span#account_select_title
              (<a href='#' onclick='crm.create_account(1); return false;'>#{t :create_new}</a> #{t :or} #{t :select_existing}):
            %span#account_disabled_title :

          -# Add [-- None --] account choice when editing existing contact that has an account.
          - options = { :selected => @account.id || 0 }
          - options[:include_blank] = true #t(:select_none) unless @issue.new_record? || @issue.account.blank?

          = collection_select :account, :id, @accounts, :id, :name, options, { :style => "width:330px; display:none;" }
          = a.text_field :name, :style => "width:324px; display:none;"
          %td= spacer
          %td{ :valign => :top }
            .label.req #{t :assigned_to}:
            = collection_select :invoice, :assigned_to, @users, :id, :full_name, { :include_blank => t(:myself) }, { :style => "width:160px;" }
      %tr
        %td{ :valign => :top }
          .label Amount:
          = f.text_field :amount, :style => "width:60px"
        %td= spacer
        %td{ :valign => :top }
          .label Vat:
          = f.select :vat, Setting.invoice_vat, { :selected => @invoice.vat.blank? ? :standard : @invoice.vat}, { :style => "width:100px" }
        %td= spacer
        %td{ :valign => :top }
          .label Currency:
          = f.select :currency, Setting.invoice_currencies, { :selected=>(@invoice.currency.blank? ? :sterling : @invoice.currency)}, { :style => "width:100px" }
      %tr
        %td{ :valign => :top }
          .label Additions:
          = f.text_field :additions, :style => "width:60px"
        %td= spacer
        %td{ :valign => :top }
          .label Invoice Total:
          = f.text_field :total, { :style => "width:60px", :disabled => "disabled" }
      %tr
        %td{ :valign => :top }
          .label Due date:
          = f.text_field :due_date, :value => f.object.due_date ? f.object.due_date.to_s(:mmddyyyy) : "", :style => "width:110px;", :autocomplete => :off
          .small
            MM/DD/YYYY
        %td= spacer
        %td{ :valign => :top }
          .label Sent date:
          = f.text_field :sent_date, :value => f.object.sent_date ? f.object.sent_date.to_s(:mmddyyyy) : "", :style => "width:110px;", :autocomplete => :off
          .small
            MM/DD/YYYY
    